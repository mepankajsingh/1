---
import Layout from '../../layouts/Layout.astro';
import TagCard from '../../components/TagCard.astro';
import { supabase } from '../../lib/supabase';

export const prerender = false;

const { data: tags } = await supabase
  .from('tags')
  .select('*, library_tags(library_id)')
  .order('name');

// Count libraries for each tag
if (tags) {
  tags.forEach(tag => {
    tag.libraryCount = tag.library_tags ? tag.library_tags.length : 0;
  });
}
---

<Layout title="UI Library Tags - UI Library Directory">
  <main class="mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-7xl">
    <div class="mb-8">
      <h1 class="text-3xl font-bold leading-tight mb-2 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-indigo-400 to-indigo-200">
        UI Library Tags
      </h1>
      <p class="text-lg text-gray-600">
        Browse UI libraries by category and feature
      </p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {tags && tags.map(tag => (
        <TagCard tag={tag} />
      ))}
    </div>
  </main>
</Layout>
